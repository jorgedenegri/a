%pregunta 1
%Paso 1: Encontrar los Puntos de Intersección

pkg load optim; % Cargar el paquete para fsolve

% Definir los polinomios P(x) y Q(x)
P = @(x) 15*x.^4 - 3*x.^2 - 40;
Q = @(x) (sqrt(2)*x - 5 + x.^2) .* (x.^2 - 2 + exp(1)) + 3*x.^5 + 1;

% Función para encontrar las raíces de la ecuación P(x) - Q(x) = 0
intersection = @(x) P(x) - Q(x);

% Intervalo de búsqueda inicial y encontrar los puntos de intersección
x_intersections = [];
for x0 = -3:0.5:3
    try
        x_sol = fsolve(intersection, x0);
        if ~ismember(x_sol, x_intersections)
            x_intersections(end + 1) = x_sol;
        end
    catch
        % Ignorar errores y continuar
    end
end
x_intersections

%Paso 2: Graficar los Polinomios

% Rango de valores para x
x_values = linspace(-2, 2, 400);

% Evaluar los polinomios
P_values = P(x_values);
Q_values = Q(x_values);

% Crear la gráfica
figure;
plot(x_values, P_values, 'b-', 'DisplayName', 'P(x) = 15x^4 - 3x^2 - 40');
hold on;
plot(x_values, Q_values, 'r-', 'DisplayName', 'Q(x)');
legend('show');
xlabel('x');
ylabel('y');
title('Gráfica de los Polinomios P(x) y Q(x)');
grid on;

%Paso 3: Calcular el Área Encerrada

% Ordenar los puntos de intersección
x_intersections_sorted = sort(x_intersections);

% Definir la función para la diferencia absoluta
area_difference = @(x) abs(P(x) - Q(x));

% Calcular el área encerrada en cada intervalo
area_1 = quad(area_difference, x_intersections_sorted(1), x_intersections_sorted(2));
area_2 = quad(area_difference, x_intersections_sorted(2), x_intersections_sorted(3));

% Sumar las áreas para obtener el área total encerrada
total_area = area_1 + area_2;
total_area


%la pregunta dos no la hace  bien

%pregunta 3


% parte a: Polinomio de Lagrange (P)
function L = lagrange(x, y)
    n = length(x);
    L = zeros(1, n);
    for k = 1:n
        p = 1;
        for j = 1:n
            if j != k
                p = conv(p, poly(x(j)))/(x(k)-x(j));
            end
        end
        L = L + y(k)*p;
    end
end

% Puntos dados
X1 = [-4 -3 -1 0 1];
Y1 = [1 -2 -4 -3 0];

% Polinomio de Lagrange
P = lagrange(X1, Y1)

% parte b : Polinomio de Newton (Q)

% Puntos dados
X2 = [-4 -2 -1 0 1];
Y2 = [-3 0 3 0 -3];

% Polinomio de Newton (usando tu función newtonp)
Q = newtonp(X2, Y2)

% parte c: Graficar los Polinomios

% Rango de x para la gráfica
x_range = linspace(-4, 1, 100);

% Evaluar los polinomios
P_vals = polyval(P, x_range);
Q_vals = polyval(Q, x_range);

% Crear la gráfica
figure;
plot(x_range, P_vals, 'b-', 'DisplayName', 'Polinomio P (Lagrange)');
hold on;
plot(x_range, Q_vals, 'r-', 'DisplayName', 'Polinomio Q (Newton)');
legend('show');
xlabel('x');
ylabel('y');
title('Gráficos de los Polinomios P y Q');
grid on;
